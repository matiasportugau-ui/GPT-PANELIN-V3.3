{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "tool_name": "lookup_customer",
  "contract_version": "v1",
  "description": "Retrieve existing customer data from KB via Wolf API. No password required.",
  "input_schema": {
    "type": "object",
    "properties": {
      "search_query": {
        "type": "string",
        "description": "Search by name, phone, or address",
        "minLength": 2
      }
    },
    "required": ["search_query"]
  },
  "output_schema": {
    "oneOf": [
      {
        "type": "object",
        "properties": {
          "ok": { "const": true },
          "contract_version": { "const": "v1" },
          "customers": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "customer_id": { "type": "string" },
                "name": { "type": "string" },
                "phone": { "type": "string" },
                "address": { "type": "string" },
                "city": { "type": "string" },
                "department": { "type": "string" },
                "notes": { "type": "string" },
                "last_interaction": { "type": "string", "format": "date-time" }
              }
            }
          },
          "count": { "type": "integer" }
        },
        "required": ["ok", "contract_version", "customers", "count"]
      },
      {
        "type": "object",
        "properties": {
          "ok": { "const": false },
          "contract_version": { "const": "v1" },
          "error": {
            "type": "object",
            "properties": {
              "code": { "type": "string" },
              "message": { "type": "string" }
            },
            "required": ["code", "message"]
          }
        },
        "required": ["ok", "contract_version", "error"]
      }
    ]
  },
  "error_codes": ["QUERY_TOO_SHORT", "WOLF_API_ERROR", "INTERNAL_ERROR"]
}
