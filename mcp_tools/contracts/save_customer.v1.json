{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "tool_name": "save_customer",
  "contract_version": "v1",
  "description": "Store or update customer data for future quotations via Wolf API. Requires KB write password.",
  "input_schema": {
    "type": "object",
    "properties": {
      "name": {
        "type": "string",
        "description": "Customer full name",
        "minLength": 1
      },
      "phone": {
        "type": "string",
        "description": "Uruguayan phone number (09XXXXXXX or +598XXXXXXXX)",
        "minLength": 9
      },
      "address": {
        "type": "string",
        "description": "Work site address"
      },
      "city": {
        "type": "string",
        "description": "City"
      },
      "department": {
        "type": "string",
        "description": "Department (Uruguay)"
      },
      "notes": {
        "type": "string",
        "description": "Additional notes about the customer or project"
      },
      "password": {
        "type": "string",
        "description": "KB write password for authorization"
      }
    },
    "required": ["name", "phone", "password"]
  },
  "output_schema": {
    "oneOf": [
      {
        "type": "object",
        "properties": {
          "ok": { "const": true },
          "contract_version": { "const": "v1" },
          "customer_id": { "type": "string" },
          "stored_at": { "type": "string", "format": "date-time" }
        },
        "required": ["ok", "contract_version", "customer_id", "stored_at"]
      },
      {
        "type": "object",
        "properties": {
          "ok": { "const": false },
          "contract_version": { "const": "v1" },
          "error": {
            "type": "object",
            "properties": {
              "code": { "type": "string" },
              "message": { "type": "string" }
            },
            "required": ["code", "message"]
          }
        },
        "required": ["ok", "contract_version", "error"]
      }
    ]
  },
  "error_codes": ["PASSWORD_REQUIRED", "INVALID_PASSWORD", "INVALID_PHONE", "WOLF_API_ERROR", "INTERNAL_ERROR"]
}
